"0","beer <- beer_awards %>% "
"0",""
"0","  filter(year %in% c(seq(2000, 2020, 1))) %>% "
"0","   mutate("
"0","    state = case_when("
"0","      state == ""Ak"" ~ ""AK"","
"0","      state == ""wa"" ~ ""WA"","
"0","      TRUE ~ state)) %>%"
"0","  "
"0","  mutate_if(is.character, as.factor) %>% "
"0",""
"0","  group_by(state, medal) %>% "
"0","  count() %>% "
"0","  ungroup() %>% "
"0","  pivot_wider(names_from = medal, "
"0","              values_from = n) %>% "
"0","  mutate(`Silver or bronze` = rowSums(select(., Bronze, Silver), na.rm = TRUE)) %>% "
"0","  select(state, Gold, `Silver or bronze`) %>% "
"0","  pivot_longer(Gold:`Silver or bronze`, names_to = 'medal', values_to = 'number') %>% "
"0","  mutate(medal = factor(medal),"
"0","         dummy = 1)"
"0",""
"0","dummy_0 = tibble(state = c(levels(beer$state),levels(beer$state)),"
"0","                 medal = c(rep('Gold', each = nlevels(beer$state)), "
"0","                           rep('Silver or bronze', each = nlevels(beer$state))),"
"0","                 number = 0,"
"0","                 dummy = 0)"
"0",""
"0","dummy_2 = tibble(state = c(levels(beer$state),levels(beer$state)),"
"0","                 medal = c(rep('Gold', each = nlevels(beer$state)), "
"0","                           rep('Silver or bronze', each = nlevels(beer$state))),"
"0","                 number = 0,"
"0","                 dummy = 2)"
"0",""
"0","beer_for_plot <- beer %>% "
"0","  rbind(., rbind(dummy_0,"
"0","                 dummy_2))"
